<div id="modal-copy-string" class="modal fade" tabindex="-1">
    <form class="modal-dialog" action="#" method="post" enctype="multipart/form-data">
        <div class="modal-content">
            <div class="modal-body">
                <h4 id="import-action-confirmation-title">{{ 'copy_string_modal.title'|trans(domain = 'EasyAdminBundle') }}</h4>

                <div class="input-group mb-3">
                    <input type="text" class="form-control" aria-label="Copier" aria-describedby="Copier" onFocus="this.select()">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" data-bs-dismiss="modal" class="btn btn-secondary">
                    <span class="btn-label">{{ 'action.cancel'|trans(domain = 'EasyAdminBundle') }}</span>
                </button>

                <button type="submit" data-bs-dismiss="modal" class="btn btn-primary" id="modal-import-action-button">
                    <i class="fa fa-fw fa-copy"></i>
                    <span class="btn-label">{{ 'copy_string_modal.action'|trans(domain = 'EasyAdminBundle') }}</span>
                </button>
            </div>
        </div>
    </form>
</div>

<script>
    document.querySelectorAll('.action-iframe').forEach((action) => {
        action.addEventListener('click', (event) => {
            const href = event.currentTarget.getAttribute('href')

            document.querySelector('#modal-copy-string').querySelector('input').value = href

            document.querySelector('#modal-import-action-button').addEventListener('click', () => {
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(href);
                } else {
                    alert('Votre navigateur ne peux pas copier')
                }
            })
        })
    })
</script>
